<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>>XRocket - Analysis Report</title>
  <link rel="stylesheet" type="text/css" href="/assets/styles/reset.css">
  <link rel="stylesheet" type="text/css" href="/assets/styles/report.css">
  <style type="text/css">
  </style>
</head>
 <body>
  <header>
    <h1>XRocket - Analysis Report</h1>
    <div class="built"></div>
  </header>
  <div class="body">
    <div class="row">
      <div class="col">
        <fieldset class="tag-detail">
          <legend class="name">Tag Detail</legend>
          <div class="content">
            <ol class="values"></ol>
          </div>
        </fieldset>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <fieldset class="tags-top-ten">
          <legend>CSS Tags: TOP 10</legend>
          <div class="content">
            <ol class="rank">
            </ol>
            <div class="chart" style="height:100%;min-height: 260px;">
            </div>
          </div>
        </fieldset>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <fieldset class="tags-groupby-layout">
          <legend>CSS Tags: Layout</legend>
          <div class="content">
            <ol class="rank">
            </ol>
          </div>
        </fieldset>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <fieldset class="col tags-all">
          <legend>CSS Tags: ALL</legend>
          <div class="content">
            <ol class="rank">
            </ol>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.2.0/dist/echarts.min.js"></script>  <script type="text/javascript" src="/assets/js/common.js"></script>
  <script type="text/javascript" data-type="report">
 var reportData = [["color",{"values":{"#222":1,"white":4,"#000":13,"#fff":20,"#939393":6,"inherit":6,"#e6e6e6":6,"px":6,"#555":6,"#f1f1f1":5,"#666":5,"#737373":1,"#8c8c8c":1,"red":3,"#5c5c5c":1,"#F0F0F0":1,"#FFF":1,"black":2,"#F1F1F1":1},"total":89}],["display",{"values":{"block":1,"none !important":1,"flex":65,"inline-block":6,"none":6,"inline-flex":2},"total":81}],["width",{"values":{"100%":31,"auto":1,"px":30,"50%":5,"38%":1,"60%":1,"17%":1,"25%":1,"33.333%":1},"total":72}],["align-items",{"values":{"center":46,"flex-start":10,"stretch":1},"total":57}],["font-size",{"values":{"px":55},"total":55}],["font-weight",{"values":{"200":3,"300":5,"400":2,"700":30,"b<uld":7},"total":47}],["padding",{"values":{"0":2,"px px":10,"px":13," px":15,"em":1,"24px 0":1,"20px 0":2,"75px 0 42px 0":1},"total":45}],["justify-content",{"values":{"center":6,"space-between":31,"flex-start":2},"total":39}],["background",{"values":{"#FFF":2,"url(/assets/images/down-arrow.svg) no-repeat scr<ull right center transparent":1,"black":2,"#FAFAFA":3,"#000":14,"#fff":9,"#fafafa":4,"white":2},"total":37}],["margin-top",{"values":{"0":2,"px":29},"total":31}],["margin-bottom",{"values":{"0":1,"px":29},"total":30}],["position",{"values":{"relative":6,"abs<ulute":9,"fixed":12},"total":27}],["margin-left",{"values":{"0":1,"px":19,"-px":7},"total":27}],["height",{"values":{"px":21,"initial":1,"auto":1,"100%":3},"total":26}],["text-align",{"values":{"center":19,"right":2,"left":2},"total":23}],["cursor",{"values":{"pointer":21},"total":21}],["flex",{"values":{"1":18,"0 0 30%":2,"0 0 auto":1},"total":21}],["top",{"values":{"0":13,"px":7},"total":20}],["gap",{"values":{"px":20},"total":20}],["z-index",{"values":{"1":10,"2":5,"99":1,"100":1},"total":17}],["opacity",{"values":{"0":9,"1":2,".4":5,"0.4":1},"total":17}],["right",{"values":{"0":7,"px":6},"total":13}],["border",{"values":{"1px s<ulid #d9d9d9":3,"1px s<ulid black":1,"1px dashed #A0A0A0":1,"1px s<ulid #e6e6e6":5,"1px s<ulid #ddd":1,"1px s<ulid #DDD":1},"total":12}],["transition",{"values":{"color 0.45s cubic-bezier(0.785, 0.135, 0.15, 0.86), border 0.45s cubic-bezier(0.785, 0.135, 0.15, 0.86)":2,"transform 0.45s cubic-bezier(0.785, 0.135, 0.15, 0.86)":1,"all 1s":3,"all .5s":2,"all 2s":2,"opacity .3s ease-in-out":1,"all 0.5s":1},"total":12}],["pointer-events",{"values":{"none":6,"auto":6},"total":12}],["text-decoration",{"values":{"none":9,"underline":2},"total":11}],["padding-left",{"values":{"px":11},"total":11}],["margin",{"values":{"0":1," px px":1,"0 auto":3,"50px 0":2,"   px":1,"35px 0":1,"px  px":1},"total":10}],["flex-direction",{"values":{"column":10},"total":10}],["font-style",{"values":{"normal":1,"italic":8},"total":9}],["border-radius",{"values":{"0":1,"px":8},"total":9}],["padding-top",{"values":{"px":8,"em":1},"total":9}],["border-top",{"values":{"1px s<ulid #e7e7e7":2,"1px s<ulid #d9d9d9":6,"1px s<ulid #e6e6e6":1},"total":9}],["left",{"values":{"0":8},"total":8}],["bottom",{"values":{"0":8},"total":8}],["text-transform",{"values":{"uppercase":8},"total":8}],["margin-right",{"values":{"px":7},"total":7}],["outline",{"values":{"none":7},"total":7}],["min-height",{"values":{"vh":4,"px":2},"total":6}],["border-width",{"values":{"0":6},"total":6}],["line-height",{"values":{"2":4,"1.8":1,"px":1},"total":6}],["overflow",{"values":{"hidden":4,"auto":2},"total":6}],["transform",{"values":{"scale(0, 1)":1,"scale(1.2)":2,"scale(1)":2},"total":5}],["border-bottom",{"values":{"1px s<ulid #e7e7e7":5},"total":5}],["object-fit",{"values":{"cover":5},"total":5}],["font-family",{"values":{"'Comfortaa'":3,"\"Comfortaa\", \"PingFang SC\", \"Microsoft YaHei\", \"Helvetica\", \"Arial\", Heiti SC, sans-serif":1},"total":4}],["background-color",{"values":{"transparent":1,"#000":1,"#E0E0E0":1},"total":3}],["padding-bottom",{"values":{"px":3},"total":3}],["flex-wrap",{"values":{"wrap":3},"total":3}],["-o-object-fit",{"values":{"cover":3},"total":3}],["letter-spacing",{"values":{"px":2},"total":2}],["max-width",{"values":{"px":2},"total":2}],["font-display",{"values":{"swap":1},"total":1}],["src",{"values":{"url(https":1},"total":1}],["box-sizing",{"values":{"border-box":1},"total":1}],["list-style-type",{"values":{"none":1},"total":1}],["appearance",{"values":{"none":1},"total":1}],["background-size",{"values":{"px px":1},"total":1}],["content",{"values":{"''":1},"total":1}],["transform-origin",{"values":{"right center":1},"total":1}],["border-left",{"values":{"1px s<ulid #e0e0e0":1},"total":1}]];
</script>
<script type="text/javascript">
  const features = {
    layout: ['justify-content', 'display','flex', 'gap', 'flex-direction', 'flex-wrap'],
  }
  const tags = {
    layout: [],
    topTen: [],
    all: []
  } 

  function genHtmlForTags(tagList) {
    const genHtmlForTag = (tagName, tagInfo) => {
      return `<li class="tag-line" data-tag="${tagName}">
        <div data-tag="${tagName}">${tagName}</div
        <div data-tag="${tagName}">${tagInfo.total}</div
        </li>`;
    }
    return tagList.map((it, idx) => genHtmlForTag(it[0], it[1]));
  }

  reportData.forEach((it, idx) => {
    const tagName = it[0];
    if (tags.topTen.length < 10) tags.topTen.push(it);

    // 分组 tag
    for (var group in features){
      if (group === 'topTen' || (group === 'all')) continue;
      if (features[group].indexOf(tagName) > -1) {
        tags[group].push(it)
      }
    }
    tags.all.push(it);
  })

  $('.tags-top-ten .content .rank').innerHTML = genHtmlForTags(tags.topTen).join('');
  $('.tags-all .content .rank').innerHTML = genHtmlForTags(tags.all).join('');
  $('.tags-groupby-layout .content .rank').innerHTML = genHtmlForTags(tags['layout']).join('');

  const chartDom = $('.tags-top-ten .content .chart');
  const myChart = echarts.init(chartDom);
  const options = {
    color: ['#2f4554'],
    xAxis: {
      type: 'category',
      axisLabel: {  
         interval:0,  
         rotate:40  
      }  
    },
    yAxis: {
      type: 'value'
    },
    series: [{
        data: [],
        type: 'bar',
        label: {
          show: true,
          position: 'top',
        },
        showBackground: true,
        backgroundStyle: {
            color: 'rgba(180, 180, 180, 0.2)'
        }
    }]
  }
  options.xAxis.data = tags.topTen.map(tag => tag[0])
  options.series[0].data = tags.topTen.map(tag => tag[1].total);

  myChart.setOption(options);

  $('.body').addEventListener('click', (e) => {
    const  ele = e.target;
    if (!ele.dataset.tag) return;

    const [tagInfo] =  tags.all.filter(it => it[0] === ele.dataset.tag);
   
    const values = Object.entries(tagInfo[1].values);
    values.sort((curr, next)=> {
      if (curr[1] > next[1]) {
          return -1;
      } else if(curr[1] < next[1]){
          return 1;
      } else {
          return 0;
      }
    });
    values.unshift(['VALUE', 'TIMES'])

    const tagInfoHtml = values.map(it => {
      return `<li data-tag-for="${ele.dataset.tag}">
        <div>${it[0]}</div>
        <div>${it[1]}</div>
      </li>`;
    })
    $('.tag-detail .name').innerHTML = `TAG DETAIL : ${ele.dataset.tag}`;
    $('.tag-detail .values').innerHTML = tagInfoHtml.join('');
  });

</script>
</body>
</html>
